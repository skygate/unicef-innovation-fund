<dom-module id="submit-page">
  <template>
    <style is="custom-style">
    .container {
      max-width: 1150px;
      text-align: center;
    }

    .container--wide {
      max-width: 1920px;
    }

    .button:hover {
      background-color: #FFFFFF;
      box-shadow: 2px 2px 10px 0 #999999;
      z-index: 1;
    }

    .button__text {
      margin-bottom: 35px;
    }

    .button__image {
      max-height: 80px;
    }

    .button--big {
      background-color: #FFFFFF;
      color: #0097D8;
      float: left;
      font-size: 1.2rem;
      height: 252px;
      padding: 0;
      text-transform: none;
      width: 50%;
    }

    .submit__icon {
      display: block;
    }

    .section__header {
      color: #0097D8;
      font-size: 1.57rem;
      line-height: 4rem;
    }

    .section__description {
      font-size: 1.1rem;
      line-height: 1.45;
      margin: 2rem 0 1.2rem;
    }

    .section__user-email {
      margin-top: 3.7rem;
    }

    .section__submit {
      background-color: #0097D8;
      color: #FFFFFF !important;
      /* Overwrite MDL default style */
      font-size: 1.6rem;
      font-weight: 400;
      height: inherit;
      letter-spacing: 0.05rem;
      margin-top: 1.1rem;
      padding: 1rem 3.2rem;
      text-transform: none;
    }

    .section__submit:hover {
      background-color: #77C2E2;
    }

    .section__break {
      border-top: 2px solid #727272;
      margin: 4.8rem 0 5.9rem;
    }

    .section__subheader {
      font-size: 1.25rem;
      font-weight: 600;
      letter-spacing: 0.05rem;
      margin-bottom: 3rem;
      text-transform: uppercase;
    }

    .section__icon {
      width: 22%;
    }

    .section__link {
      text-decoration: none;
    }

    .section__back {
      background-color: transparent;
      border: none;
      float: left;
      font-size: 1rem;
      text-decoration: underline;
      text-transform: uppercase;
    }

    .section__input {
      background-color: transparent;
      border: 3px solid #BABCBD;
      color: #0097D8;
      display: block;
      font-size: 1.1rem;
      margin: 0 auto;
      padding: 0.6rem;
      width: 230px;
    }

    .section__input:focus {
        outline: none
    }

    .section__confirm-email {
      background-color: #0097D8;
      border: none;
      color: #FFFFFF;
      font-size: 1rem;
      font-weight: 400;
      margin-top: 1.85rem;
      padding: 1.35rem 0;
      width: 250px;
    }

    .section__confirm-email:disabled {
      background-color: #BABCBD;
      color: #000000;
    }

    .faq__name {
      font-size: 1.25rem;
      font-weight: 600;
      margin: 1.3rem 0;
      text-align: left;
    }

    .faq__image {
      margin-top: 3rem;
      width: 100%;
    }

    .faq__link {
      float: right;
      font-weight: 400;
      text-decoration: none;
    }

    .faq__description {
      font-size: 1.25rem;
      line-height: 1.4;
      letter-spacing: 0.094rem;
      margin-bottom: 4.1rem;
      text-align: left;
    }

    .js-visible {
      opacity: 1;
      visibility: visible;
    }

    .js-hidden {
      opacity: 0;
      visibility: hidden;
      max-height: 0;
    }

    button.fade-in{
        animation-delay: 0.525s !important;
    }

    @media (max-width: 1120px) {
      .button--big {
        font-size: 2rem;
        height: 250px;
      }
    }

    @media (max-width: 920px) {
      .section__back {
        float: none;
      }
    }

    @media (min-width: 680px) {
      .button:first-of-type:after {
        border-right: 2px solid #58595B;
        content: '';
        height: 60%;
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
      }
    }

    @media (max-width: 680px) {
      .button--big {
        display: block;
        float: none;
        width: 100%;
      }
    }

    </style>
    <style is="custom-style" include="style-fade-in"></style>
    <firebase-document
      app-name="test"
      path="/summary/portfolios/invested_youth_engagement"
      data="{{emails}}">
    </firebase-document>
    <header class='page__header page__header--dark'>
      <div class='mdl-grid container' style='position:relative;'>
        <div class="mdl-layout-spacer"></div>
        <div class="mdl-cell mdl-cell--10-col">
          <h1 class='page__header-title fade-in'>Submit</h1>
        </div>
        <div class="mdl-layout-spacer"></div>
      </div>
    </header>
    <div class="mdl-grid js-visible" data-target="main">
      <div class="mdl-layout-spacer"></div>
      <div class="container--wide mdl-cell mdl-cell--12-col">
        <button on-tap="changeSection" class="button button--big mdl-button mdl-js-button mdl-js-ripple-effect fade-in" data-display="office" data-hide="main">
          <p class="button__text">Submissions by UNICEF country offices</p>
          <img src="../images/icons/country_offices.png" alt="Submissions by country offices" class="button__image"/>
        </button>
        <button on-tap="changeSection" class="button button--big mdl-button mdl-js-button mdl-js-ripple-effect fade-in" data-display="startup" data-hide="main">
          <p class="button__text">Submissions by start-ups</p>
          <img src="../images/icons/startups.png" alt="Submissions by country offices" class="button__image"/>
        </button>
      </div>
      <div class="mdl-layout-spacer"></div>
    </div>
    <div class="mdl-grid js-hidden" data-target="office">
      <div class="mdl-layout-spacer"></div>
      <div class="container mdl-cell mdl-cell--12-col">
        <button on-tap="changeSection" class="section__back" id="back-from-office" data-display="main" data-hide="office">Back</button>
        <h3 class="section__header">UNICEF Country Offices</h3>
        <p class="section__description">If You are a country office, please type your email to continue</p>
        <form is="iron-form" class="section__form" on-submit="submitEmail">
          <input type="text" class="section__input" placeholder="email@unicef.org" on-input="checkAuth">
          <button type="submit" class="section__confirm-email" data-display="office-submited" data-hide="office" disabled="{{isDisabled}}">continue</button>
        </form>
      </div>
      <div class="mdl-layout-spacer"></div>
    </div>
    <div class="mdl-grid js-hidden" data-target="office-submited">
      <div class="mdl-layout-spacer"></div>
      <div class="container mdl-cell mdl-cell--12-col">
        <button on-tap="changeSection" class="section__back" data-display="main" data-hide="office-submited">Back</button>
        <h3 class="section__header">UNICEF Country Offices</h3>
        <strong class="section__description">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Excepturi est ducimus, nemo laborum esse repellat accusamus, repudiandae officia neque voluptatum id. Facilis iste odit eligendi perspiciatis, sed hic nesciunt maiores?</strong>
        <p class="section__user-email"></p>
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSdL7bKFc-zSzm4R4wK5eKsKRzW_HqQsdPYyA62sCXR84BrF9A/viewform?usp=send_form" class="section__submit mdl-button mdl-js-button mdl-js-ripple-effect">Submission Form</a>
        <hr class="section__break">
        <h3 class="section__subheader">TBD</h3>
        <h4 class="faq__name">Short Background Note<a href="https://drive.google.com/file/d/0BwC3tr7jXADzNXJTNzk4d01qams/view?usp=sharing" class="faq__link">Download</a></h4>
        <p class="faq__description">The Innovation Fund allows UNICEF to quickly assess, fund and scale open-source solutions that have been developed by companies in new and emerging markets. The Innovation Fund supports the generation of open source, public goods that address the most pressing challenges facing children. The Innovation Fund brings together models of financing and methodologies used by Venture Capital funds and the principles of UNICEF'S award winning Innovation Unit. </p>
        <h4 class="faq__name">List of Programme Countries<a href="http://www.unicefinnovationfund.org/programme-countries" class="faq__link">Download</a></h4>
        <p class="faq__description">This is a list of programme countries who are eligible to submit a project to the Innovation Fund. </p>
        <h4 class="faq__name">Innovation Principles<a href="http://www.unicefstories.org/principles/" class="faq__link">Download</a></h4>
        <p class="faq__description">The following set of principles represents a concerted effort by donors to capture the most important lessons learned by the development community in the implementation of technology-enabled programs. Having evolved from a previous set of implementer precepts endorsed by over 300 organizations, these principles seek to serve as a set of living guidelines that are meant to inform, but not dictate, the design of technology-enabled development programs.</p>
        <h4 class="faq__name">Previous UNICEF Request for Expression of Interest (REOI)<a href="https://drive.google.com/file/d/0B6-5qW-9eN2bUG9nOVA2eGpyU0k/view" class="faq__link">Download</a></h4>
        <h4 class="faq__name">Frequently Asked Questions (FAQs) about the Request for Expression of Interest (REOI)<a href="http://www.unicefinnovationfund.org/submission-faqs" class="faq__link">Download</a></h4>
        <img src="https://placehold.it/800x64" alt="" class="faq__image">
      </div>
      <div class="mdl-layout-spacer"></div>
    </div>
    <div class="mdl-grid js-hidden" data-target="startup">
      <div class="mdl-layout-spacer"></div>
      <div class="container mdl-cell mdl-cell--12-col">
        <button on-tap="changeSection" class="section__back" data-display="main" data-hide="startup">Back</button>
        <h3 class="section__header">STARTUP</h3>
        <p class="section__description">The next call for submissions from start-ups and academic institutions is planned for December 2016. Please follow us on Twitter <a href="https://twitter.com/unicefinnovate" class="section__link">@unicefinnovate</a>, where we will share updates about the Fund and future submission opportunities and deadlines.</p>
        <p class="section__description">If you submitted an Expression of Interest in the last round (closed on 26 February 2016), only selected companies/institutions have been contacted with information about next steps. Thank you for your submission nd interest in the Innovation Fund.</p>
        <hr class="section__break">
        <h3 class="section__subheader">Resources</h3>
        <img src="../images/icons/resources.png" alt="" class="section__icon">
        <h4 class="faq__name">Short Background Note<a href="https://drive.google.com/file/d/0BwC3tr7jXADzNXJTNzk4d01qams/view?usp=sharing" class="faq__link">Download</a></h4>
        <p class="faq__description">The Innovation Fund allows UNICEF to quickly assess, fund and scale open-source solutions that have been developed by companies in new and emerging markets. The Innovation Fund supports the generation of open source, public goods that address the most pressing challenges facing children. The Innovation Fund brings together models of financing and methodologies used by Venture Capital funds and the principles of UNICEF'S award winning Innovation Unit. </p>
        <h4 class="faq__name">Innovation Principles<a href="http://www.unicefstories.org/principles/" class="faq__link">Download</a></h4>
        <p class="faq__description">The following set of principles represents a concerted effort by donors to capture the most important lessons learned by the development community in the implementation of technology-enabled programs. Having evolved from a previous set of implementer precepts endorsed by over 300 organizations, these principles seek to serve as a set of living guidelines that are meant to inform, but not dictate, the design of technology-enabled development programs.</p>
      </div>
      <div class="mdl-layout-spacer"></div>
    </div>
  </template>
  <script>
  Polymer({
    is: "submit-page",
    properties: {
        isDisabled: {
            type: Boolean,
            value: true
        }
    },
    listeners: {
      'iron-form-submit': 'submitEmail'
    },
    checkAuth: function (event) {
        var emails = this.emails;
        for (var key in emails) {
            if (emails.hasOwnProperty(key) && emails[key] === event.target.value) {
                return this.isDisabled = false;
            } else {
                this.isDisabled = true;
            }
        }
    },
    toggleVisible: function(toHide, toShow) {
      var visibleClass = "js-visible";
      var hiddenClass = "js-hidden";

      toHide.classList.remove(visibleClass);
      toHide.classList.add(hiddenClass);

      toShow.classList.remove(hiddenClass);
      toShow.classList.add(visibleClass);
    },
    changeSection: function(event) {
      var hide = event.target.dataset.hide || event.target.parentElement.dataset.hide;
      var target = event.target.dataset.display || event.target.parentElement.dataset.display;

      var toHide = this.$$("[data-target='" + hide + "']");
      var toShow = this.$$("[data-target='" + target + "']");

      this.toggleVisible(toHide, toShow);
    },
    submitEmail: function(event) {
      event.preventDefault();
      var emailAddress = this.$$(".section__input").value;

      this.$$(".section__user-email").innerHTML = emailAddress;

      var submitButton = this.$$('.section__confirm-email');

      var toHide = this.$$("[data-target='" + submitButton.dataset.hide + "']");
      var toShow = this.$$("[data-target='" + submitButton.dataset.display + "']");

      this.toggleVisible(toHide, toShow);
    }
  })
  </script>
</dom-module>
