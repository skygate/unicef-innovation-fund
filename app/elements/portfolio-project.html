<dom-module id='portfolio-project'>
  <template>
    <style>

      :host {
        background-color: #fff;
        display: inline-block;
        width: 100%;
        position: relative;
        transition: all .175s ease-in;
      }

      :host.is-expanded {
        height: 300px;
        width: 100%;
      }

      ul{
        list-style: none;
      }

      .portfolio-project__content {
        line-height: 1.5;
        height: 100%;
      }

      .portfolio-project__container {
        transition: box-shadow .175s ease-in;
        cursor: pointer;
        height: 100%;
      }

      .portfolio-project__sub-text {
        color:gray;
      }

      .portfolio-project__name {
        text-align: left;
        margin: 0;
        padding: 0;
      }

      .portfolio-project__content {
        padding: 32px 16px;
      }

      .portfolio-project__icon {
        position: absolute;
        top: 17px;
        right: 16px;
        opacity: 0;
        transition: opacity .175s ease-out;
      }

      :host:hover .portfolio-project__icon {
        opacity: 1;
      }

      .portfolio-project__data {
        overflow: hidden;
        width: 0px;
        height: 0px;
        transition: all .175s ease-in;
      }

    </style>

    <div class-name='divider divider--{{svg}} portfolio-project__container mdl-shadow--4dp' on-tap="clickUserElement" on-mouseenter='onHovered' on-mouseleave='onUnHovered'>
      <div class="portfolio-project__content">
        <div class="portfolio-project__icon">
          <i class="material-icons">&#xE56B;</i>
        </div>
        <div class='portfolio-project__name'>
          <span data-page="{{svg}}"><b>{{item.name}}</b></span>
        </div>
        <div class='portfolio-project__sub-text'>
          {{item.country}}
        </div>
        <div class='portfolio-project__sub-text'>
          {{to_mil(item.amount)}}
        </div>
      </div>
      <div class="portfolio-project__data">
        ABC
      </div>
    </div>

  </template>
</dom-module>

<script>

  function cleanToMil(num) {
    if(num >= 1000000){
      num =  Math.max( Math.round((num/1000000) * 10) / 10, 0 ).toFixed(1);
      num =  num  % 1 === 0 ? parseInt(num) : num;
      return "$" + num + "M";
    }else{
      num = Math.round((num/1000))    // num =  Math.max( Math.round((num/100000) * 10) / 10, 0 ).toFixed(0);
      num = num  % 1 === 0 ? parseInt(num) : num;
      return "$" + num + "K";
    }
  }

  Polymer({
    is: 'portfolio-project',

    properties: {
      svg: {
        value: '',
        notify: true
      }
    },

    to_mil: function(num){
      return(cleanToMil(num.replace(/\$|,/g, '')))
    },

    onHovered: function(e) {
      this.$$('.portfolio-project__container').classList.add('mdl-shadow--8dp');
    },

    onUnHovered: function(e) {
      this.$$('.portfolio-project__container').classList.remove('mdl-shadow--8dp');
    },

    clickUserElement:function(){
      var project = $(this);
      project.toggleClass('is-expanded');
      //clickUserElement(this.item, this.svg);
    }
  });

</script>
